{% extends "leave_app/base.html" %}
{% load nav_extras %}
{% block title %}ตั้งรหัสผ่านใหม่{% endblock %}

{% block content %}
<div class="max-w-md mx-auto rounded-2xl border border-slate-100 bg-white/80 p-6 shadow-sm
            dark:border-slate-800 dark:bg-slate-900/70">
    <h1 class="mb-2 text-center text-2xl font-semibold tracking-tight">
        ตั้งรหัสผ่านใหม่
    </h1>

    {% if validlink %}
    <form method="post" class="space-y-4">
        {% csrf_token %}

        <div>
            <label class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200">
                รหัสผ่านใหม่
            </label>
            {{ form.new_password1|add_class:"w-full rounded-lg border border-slate-200 bg-white/90 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-50" }}
            {% if form.new_password1.errors %}
            <p class="mt-1 text-xs text-rose-500">{{ form.new_password1.errors.0 }}</p>
            {% endif %}
        </div>

        <div>
            <label class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200">
                ยืนยันรหัสผ่านใหม่
            </label>
            {{ form.new_password2|add_class:"w-full rounded-lg border border-slate-200 bg-white/90 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-50" }}
            {% if form.new_password2.errors %}
            <p class="mt-1 text-xs text-rose-500">{{ form.new_password2.errors.0 }}</p>
            {% endif %}
        </div>

        <button type="submit" class="w-full rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm
                   hover:bg-green-500 dark:bg-green-500 dark:hover:bg-green-400">
            บันทึกรหัสผ่านใหม่
        </button>
    </form>
    {% else %}
    <p class="text-sm text-rose-500 text-center">
        ลิงก์นี้หมดอายุหรือไม่ถูกต้อง กรุณาขอรีเซ็ตรหัสผ่านใหม่อีกครั้ง
    </p>
    <div class="mt-4 text-center">
        <a href="{% url 'password_reset' %}" class="inline-flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm
                  hover:bg-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-400">
            ขอรีเซ็ตใหม่
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}